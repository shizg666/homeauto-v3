<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.landleaf.homeauto.center.device.model.mapper.FamilyMaintenanceRecordMapper">

    <select id="maintenanceStatistic" resultType="java.lang.Integer">
        select count(fm.id) from family_maintenance_record fm where  fm.family_id in
        <foreach collection="familyIds" item="id" open="(" close=")" separator=",">
            #{id}
        </foreach>
        <if test="startTime != null ">
            AND fm.create_time &gt;= #{startTime}
        </if>
        <if test="endTime!=null ">
            AND fm.create_time &lt;= #{endTime}
        </if>
        <!--<if test="startTime != null ">-->
            <!--AND fm.create_time &gt;= TO_TIMESTAMP(#{startTime}, 'yyyy-mm-dd hh24:mi:ss')-->
        <!--</if>-->
        <!--<if test="endTime!=null ">-->
            <!--AND fm.create_time &lt;= TO_TIMESTAMP(#{endTime}, 'yyyy-mm-dd hh24:mi:ss')-->
        <!--</if>-->
    </select>
</mapper>
